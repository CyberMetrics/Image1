<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>R.A.D.A.R | Authentication</title>



<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Montserrat:wght@600;800;900&display=swap" rel="stylesheet">

<style>
:root {
  --bg:#000;
  --text:#f5f5f5;
  --muted:#666;
  --border:#1a1a1a;
  --accent:#ccff00;
}

*{box-sizing:border-box;margin:0;padding:0;}

body{
  height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:'JetBrains Mono',monospace;
  overflow:hidden;
}

.container{position:relative;width:100%;height:100%;}

/* ---------------- AUTH PANEL ---------------- */

.auth-panel{
  position:absolute;
  left:0;
  width:45%;
  height:100%;
  padding:60px;
  background:rgba(0,0,0,.96);
  border-right:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  transition:1s cubic-bezier(.76,0,.24,1);
  z-index:5;
}

.auth-panel.slide-right{
  left:55%;
  border-right:none;
  border-left:1px solid var(--border);
}

/* ---------------- MODEL AREA ---------------- */

.model-container{
  position:absolute;
  right:0;
  width:55%;
  height:100%;
  overflow:hidden;
  transition:1s cubic-bezier(.76,0,.24,1);
}

.model-container.slide-left{right:45%;}

canvas{width:100%;height:100%;display:block;}

/* ---------- VISUAL OVERLAY (NO JS) ---------- */

.visual-overlay{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.grid{
  position:absolute;
  inset:0;
  background-image:
    linear-gradient(rgba(255,255,255,.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.03) 1px, transparent 1px);
  background-size:40px 40px;
  animation:gridMove 20s linear infinite;
}

@keyframes gridMove{
  from{background-position:0 0;}
  to{background-position:40px 40px;}
}

.glow-orb{
  position:absolute;
  width:420px;
  height:420px;
  background:radial-gradient(circle, rgba(204,255,0,.18), transparent 60%);
  filter:blur(40px);
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  animation:orbFloat 6s ease-in-out infinite;
}

@keyframes orbFloat{
  0%,100%{transform:translate(-50%,-48%);}
  50%{transform:translate(-50%,-52%);}
}

/* ---------------- FORM ---------------- */

.form{max-width:380px;width:100%;}
.hidden{display:none;}

.brand{
  font-family:'Montserrat',sans-serif;
  font-weight:900;
  font-size:1.9rem;
}
.brand span{color:var(--accent);}

.subtitle{color:var(--muted);margin-bottom:35px;font-size:.85rem;}

.input-group{margin-bottom:18px;}
label{font-size:.7rem;color:var(--muted);letter-spacing:1px;}

input{
  width:100%;
  background:#0b0b0b;
  border:1px solid var(--border);
  padding:14px;
  color:var(--text);
  transition:border-color .3s, box-shadow .3s, transform .2s;
}

input:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 2px rgba(204,255,0,.15);
  transform:translateY(-1px);
  outline:none;
}

.btn{
  width:100%;
  padding:15px;
  font-family:'Montserrat',sans-serif;
  font-weight:800;
  border:none;
  cursor:pointer;
}

.btn-primary{
  background:var(--text);
  color:#000;
  margin-top:20px;
  transition:transform .2s, box-shadow .2s;
}

.btn-primary:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 30px rgba(204,255,0,.25);
}

.btn-primary:active{transform:translateY(0);}

.social{
  display:flex;
  gap:12px;
  margin-top:20px;
}

.social button{
  flex:1;
  background:#0e0e0e;
  border:1px solid var(--border);
  color:var(--text);
  font-size:.75rem;
}

.toggle{
  margin-top:26px;
  text-align:center;
  font-size:.8rem;
  color:var(--muted);
}

.toggle span{
  color:var(--text);
  cursor:pointer;
}

/* ---------------- RESPONSIVE ---------------- */

@media(max-width:900px){
  .auth-panel{
    width:100%;
    left:0!important;
    border:none;
  }
  .model-container{display:none;}
  body{overflow:auto;}
}
</style>
</head>

<body>

<div class="container">

  <div class="auth-panel" id="authPanel">

    <!-- LOGIN -->
    <form class="form" id="loginForm" method="POST" action="{{ url_for('auth.login') }}">
      <div class="brand">R.A.D.A.R <span>//</span></div>
      <h2>Sign in</h2>
      <p class="subtitle">Monitor and protect your system</p>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div style="color: #FF0055; font-size: 0.8rem; margin-bottom: 15px; border: 1px solid #FF0055; padding: 10px; background: rgba(255, 0, 85, 0.1);">
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <div class="input-group">
        <label>Username</label>
        <input type="text" name="username" required>
      </div>

      <div class="input-group">
        <label>Password</label>
        <input type="password" name="password" required>
      </div>

      <button type="submit" class="btn btn-primary">Sign in</button>


      <div class="social">
        <button type="button" onclick="window.location.href='/login/github'">Continue with GitHub</button>
      </div>

      <div class="toggle">
        New here? <span onclick="toggleAuth()">Create account</span>
      </div>
    </form>

    <!-- SIGNUP -->
    <form class="form hidden" id="signupForm" method="POST" action="{{ url_for('auth.register') }}">
      <div class="brand">R.A.D.A.R <span>//</span></div>
      <h2>Create account</h2>
      <p class="subtitle">Quick setup</p>

      <div class="input-group"><label>Name</label><input name="name" required></div>
      <div class="input-group"><label>Email</label><input name="email" required></div>
      <div class="input-group"><label>Password</label><input type="password" name="password" required></div>

      <button type="submit" class="btn btn-primary">Create account</button>

      <div class="toggle">
        Already have one? <span onclick="toggleAuth()">Sign in</span>
      </div>
    </form>

  </div>

  <div class="model-container" id="modelContainer">
    <spline-viewer url="https://prod.spline.design/69TxYjANQ5pFiezL/scene.splinecode"></spline-viewer>
  </div>

</div>

<script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.3/build/spline-viewer.js"></script>

<script>
/* ---------- AUTH ---------- */
let isSignup=false;
const authPanel = document.getElementById('authPanel');
const modelContainer = document.getElementById('modelContainer');
const loginForm = document.getElementById('loginForm');
const signupForm = document.getElementById('signupForm');

function toggleAuth(){
  isSignup=!isSignup;
  authPanel.classList.toggle("slide-right",isSignup);
  modelContainer.classList.toggle("slide-left",isSignup);
  setTimeout(()=>{
    loginForm.classList.toggle("hidden",isSignup);
    signupForm.classList.toggle("hidden",!isSignup);
  },500);
}
function signupDone(){toggleAuth();}
</script>

</body>
</html>
